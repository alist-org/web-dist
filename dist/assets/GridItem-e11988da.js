import{dO as w,U as I,x as r,aC as v,o as d,da as S,aP as z,d as M,b as P,A as m,ai as h,$ as b,am as _,ej as n,E as K,aT as E,d2 as f,aO as O,S as o,b2 as W,aN as A,ah as T,cX as G,au as L,j as D}from"./index-13b290a7.js";import{b as H}from"./style-a91f2fe1.js";import{n as B}from"./storage-class-1ac53f89.js";import{u as U}from"./index-c1c6ff9d.js";import{I as F}from"./ImageWithError-335988a8.js";import{I as J,u as N}from"./helper-edad9708.js";const p=e=>{const{isHide:j}=w();if(j(e.obj))return null;const{setPathAs:x}=I(),i=r(z,{get color(){return v()},get boxSize(){return`${parseInt(d.grid_item_size)-30}px`},get as(){return S(e.obj)}}),{show:$}=H({id:1}),{pushHref:R,to:s,pathname:y}=M(),C=P(),{openWithDoubleClick:a,toggleWithClick:l,restoreSelectionCache:c}=N(),k=m(()=>B(e.obj.storage_class)),u=m(()=>{const t=k();return t?C(`home.storage_class.${t}`):void 0}),g=()=>D(y(),e.obj.name);return r(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return r(h,{get classList(){return{selected:!!e.obj.selected}},class:"grid-item viselect-item",get"data-index"(){return e.index},w:"$full",p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.06)",bgColor:b()}},as:U,get href(){return e.obj.name},get cursor(){return a()||l()?"default":"pointer"},get bgColor(){return _(()=>!!e.obj.selected,!0)()?b():void 0},"on:dblclick":()=>{a()&&(n(e.index,!0,!0),s(g()))},"on:click":t=>{if(t.preventDefault(),!a()&&!(t.ctrlKey||t.metaKey||t.shiftKey)&&c()){if(l())return n(e.index,!e.obj.selected);s(g())}},onMouseEnter:()=>{x(e.obj.name,e.obj.is_dir,!0)},onContextMenu:t=>{K(()=>{n(e.index,!0,!0)}),$(t,{props:e.obj})},get children(){return[r(E,{class:"item-thumbnail",get h(){return`${parseInt(d.grid_item_size)}px`},w:"$full",get cursor(){return e.obj.type!==f.IMAGE?"inherit":"pointer"},"on:click":t=>{e.obj.type===f.IMAGE&&(t.ctrlKey||t.metaKey||t.shiftKey||c()&&(O.emit("gallery",e.obj.name),t.preventDefault(),t.stopPropagation()))},pos:"relative",get children(){return[r(o,{get when(){return W()},get children(){return r(J,{pos:"absolute",left:"$1",top:"$1","on:mousedown":t=>{t.stopPropagation()},"on:click":t=>{t.stopPropagation()},get checked(){return e.obj.selected},onChange:t=>{n(e.index,t.target.checked)}})}}),r(o,{get when(){return e.obj.thumb},fallback:i,get children(){return r(F,{maxH:"$full",maxW:"$full",rounded:"$lg",shadow:"$md",get fallback(){return r(A,{size:"lg"})},fallbackErr:i,get src(){return e.obj.thumb},loading:"lazy"})}})]}}),r(h,{spacing:"$1",w:"$full",alignItems:"center",get children(){return[r(T,{css:{whiteSpace:"nowrap",textOverflow:"ellipsis"},w:"$full",overflow:"hidden",textAlign:"center",fontSize:"$sm",get title(){return e.obj.name},get children(){return e.obj.name}}),r(o,{get when(){return u()},get children(){return r(G,{variant:"subtle",colorScheme:"primary",textTransform:"none",css:{"font-size":"0.65rem"},get children(){return u()}})}})]}})]}})}})};export{p as G};
