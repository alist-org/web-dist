import{b as O,B as s,H as y,dS as M,br as B,x as e,M as F,I,bu as T,J as W,am as k,K as R,ai as $,bR as g,bE as u,L,av as C,ao as A,cs as H,bW as D,W as E,ah as p,aX as q,O as z,Q as S,R as N,dT as h,dU as V,dV as j,aN as J}from"./index-d4e8a49f.js";const Q=(t,a=.2)=>{if(t.startsWith("#")){const r=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16);return`rgba(${r}, ${i}, ${l}, ${a})`}return t.startsWith("rgb(")?t.replace("rgb(","rgba(").replace(")",`, ${a})`):t.startsWith("rgba(")?t.replace(/[\d.]+\)$/,`${a})`):t},m=["#ff776e","#feb34a","#62e56f","#4e9cff","#d17bff"],U=t=>{const a=O(),[r,i]=s(""),[l,o]=s(""),[v,b]=s(!1),[d,c]=s(m[0]),[w,f]=s([]);y(()=>{t.editingLabel?(i(t.editingLabel.name),o(t.editingLabel.description||""),c(t.editingLabel.bg_color),M(t.editingLabel.id).then(n=>{B(n,x=>{f(x||[])})})):(i(""),o(""),c(m[0]),f([]))});const _=async()=>{if(!r()){h.show({title:a("home.tag.name"),description:a("home.tag.name_required"),status:"warning"});return}try{b(!0),t.editingLabel?await V(t.editingLabel.id,r(),l(),d()):await j(r(),l(),d()),t.onSubmit(r(),l(),d()),i(""),o(""),t.onClose(),J.emit("refresh_labels"),h.show({title:a("home.tag.name"),description:t.editingLabel?a("home.tag.update_success"):a("home.tag.create_success"),status:"success"})}catch(n){h.show({title:a("home.tag.name"),description:n.message||(t.editingLabel?a("home.tag.update_failed"):a("home.tag.create_failed")),status:"danger"})}finally{b(!1)}};return e(N,{get opened(){return t.isOpen},get onClose(){return t.onClose},get children(){return[e(F,{}),e(I,{get children(){return[e(T,{}),e(W,{get children(){return k(()=>!!t.editingLabel,!0)()?a("home.tag.edit"):a("home.tag.add")}}),e(R,{get children(){return e($,{spacing:"$3",get children(){return[e(g,{required:!0,get children(){return[e(u,{get children(){return a("home.tag.name")}}),e(L,{get placeholder(){return a("home.tag.name")},get value(){return r()},onChange:n=>i(n.currentTarget.value)})]}}),e(g,{get children(){return[e(u,{get children(){return a("home.tag.description")}}),e(L,{get placeholder(){return a("home.tag.description")},get value(){return l()},onChange:n=>o(n.currentTarget.value)})]}}),e(g,{get children(){return[e(u,{get children(){return a("home.tag.color")}}),e(C,{spacing:"$4",justifyContent:"start",get children(){return m.map(n=>e(A,{as:"button",type:"button",w:"$7",h:"$7",rounded:"$full",bgColor:n,cursor:"pointer",get border(){return d()===n?"3px solid $neutral8":"none"},_hover:{transform:"scale(1.1)"},transition:"all 0.2s",onClick:()=>c(n)}))}})]}}),e(H,{}),e(g,{get children(){return[e(D,{mb:"$4",get children(){return a("home.tag.related_files")}}),e($,{spacing:"$2",alignItems:"stretch",get children(){return e(E,{get each(){return w()},children:n=>e(C,{p:"$4",bg:"$neutral3",rounded:"$md",spacing:"$2",overflow:"hidden",alignItems:"center",get children(){return[e(p,{flex:"2",fontSize:"$md",noOfLines:1,get children(){return n.name}}),e(q,{get label(){return n.path},placement:"top",get children(){return e(p,{flex:"3",fontSize:"$sm",color:"$neutral11",noOfLines:1,css:{direction:"rtl",textAlign:"left",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},get children(){return n.path}})}})]}})})}})]}})]}})}}),e(z,{get children(){return[e(S,{colorScheme:"primary",get onClick(){return t.onClose},mr:"$2",get children(){return a("global.cancel")}}),e(S,{onClick:_,get loading(){return v()},get children(){return a("global.confirm")}})]}})]}})]}})};export{U as A,Q as g};
