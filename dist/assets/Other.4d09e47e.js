import{d as x,e as i,a,b6 as o,f as t,bf as u,c7 as D,ap as I,B as c,bd as g,n as l,I as L,a0 as E,Z as F}from"./index.f670c9cc.js";import{o as N}from"./index.dba7e867.js";import{c as P}from"./useUtil.b624e1fa.js";import{G as T}from"./index.cd667c0a.js";import{I as q}from"./SettingItem.39db597e.js";import"./api.1735ffb2.js";import"./index.0215c08b.js";import"./item_type.be442da4.js";const ee=()=>{const r=x();N("manage.sidemenu.other");const[d,m]=i(""),[p,h]=i(""),[_,k]=i(""),[y,f]=i(""),[b,w]=i([]),[A,G]=a(()=>o.get(`/admin/setting/list?groups=${T.ARIA2},${T.SINGLE}`)),[U,Q]=a(()=>o.post("/admin/setting/set_aria2",{uri:d(),secret:p()})),[B,H]=a(()=>o.post("/admin/setting/set_qbit",{url:_()}));(async()=>{const e=await G();g(e,n=>{var $,v,S,C;m((($=n.find(s=>s.key==="aria2_uri"))==null?void 0:$.value)||""),h(((v=n.find(s=>s.key==="aria2_secret"))==null?void 0:v.value)||""),f(((S=n.find(s=>s.key==="token"))==null?void 0:S.value)||""),k(((C=n.find(s=>s.key==="qbittorrent_url"))==null?void 0:C.value)||""),w(n)})})();const[M,O]=a(()=>o.post("/admin/setting/reset_token")),{copy:R}=P();return t(F,{get loading(){return A()},get children(){return[t(u,{mb:"$2",get children(){return r("settings_other.aria2")}}),t(D,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[t(q,I(()=>b().find(e=>e.key==="aria2_uri"),{get value(){return d()},onChange:e=>m(e)})),t(q,I(()=>b().find(e=>e.key==="aria2_secret"),{get value(){return p()},onChange:e=>h(e)}))]}}),t(c,{my:"$2",get loading(){return U()},onClick:async()=>{const e=await Q();g(e,n=>{l.success(`${r("settings_other.aria2_version")} ${n}`)})},get children(){return r("settings_other.set_aria2")}}),t(u,{my:"$2",get children(){return r("settings.qbittorrent_url")}}),t(L,{get value(){return _()},onInput:e=>{k(e.currentTarget.value)}}),t(c,{my:"$2",get loading(){return B()},onClick:async()=>{const e=await H();g(e,n=>{l.success(n)})},get children(){return r("settings_other.set_qbit")}}),t(u,{my:"$2",get children(){return r("settings.token")}}),t(L,{get value(){return y()},readOnly:!0}),t(E,{my:"$2",spacing:"$2",get children(){return[t(c,{onClick:()=>{R(y())},get children(){return r("settings_other.copy_token")}}),t(c,{colorScheme:"danger",get loading(){return M()},onClick:async()=>{const e=await O();g(e,n=>{l.success(r("settings_other.reset_token_success")),f(n)})},get children(){return r("settings_other.reset_token")}})]}})]}})};export{ee as default};
