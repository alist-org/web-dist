import{b as w,d as D,B as r,q as C,x as t,av as g,Q as l,ao as v,dD as S,dE as x,dF as u,W as h,dG as m,dH as B,dI as i,ai as H,e1 as _,bw as p,e2 as E,n as F}from"./index-6ba85c96.js";import{D as L}from"./DeletePopover-aa282cb2.js";const G=()=>{const n=w(),{to:o}=D(),[f,b]=r([]);r([]);const[R,d]=r(!1),[y,c]=r(null),s=async()=>{d(!0);try{const[e]=await Promise.all([_()]);p(e,a=>{b(a.content)})}finally{d(!1)}};C(()=>{s()});const T=async e=>{c(e.id);try{const a=await E(e.id);p(a,()=>{F.success(n("global.delete_success")),s()})}finally{c(null)}},$=e=>e===1||e===2,k=e=>e===2;return t(H,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[t(g,{spacing:"$2",get children(){return[t(l,{colorScheme:"accent",get loading(){return R()},onClick:s,get children(){return n("global.refresh")}}),t(l,{onClick:()=>{o("/@manage/permissions/add")},get children(){return n("global.add")}})]}}),t(v,{w:"$full",overflowX:"auto",get children(){return t(S,{highlightOnHover:!0,dense:!0,get children(){return[t(x,{get children(){return t(u,{get children(){return[t(h,{each:["role_name","role_description"],children:e=>t(m,{get children(){return n(`permissions.role.${e}`)}})}),t(m,{get children(){return n("global.operations")}})]}})}}),t(B,{get children(){return t(h,{get each(){return f()},children:e=>t(u,{get children(){return[t(i,{get children(){return e.name}}),t(i,{get children(){return e.description}}),t(i,{get children(){return t(g,{spacing:"$2",get children(){return[t(l,{get disabled(){return k(e.id)},onClick:()=>{o(`/@manage/permissions/edit/${e.id}`)},get children(){return n("global.edit")}}),t(L,{get name(){return e.name},get loading(){return y()===e.id},get disabled(){return $(e.id)},onClick:()=>T(e)})]}})}})]}})})}})]}})}})]}})};export{G as default};
