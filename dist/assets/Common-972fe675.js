import{b as v,d as x,be as f,bv as g,cW as _,B as C,A as $,x as a,dC as B,V as L,bw as u,n as h,av as N,Q as y,ai as R,dB as T}from"./index-13b290a7.js";import{b as A}from"./useTitle-efd03a2a.js";import{I as M}from"./SettingItem-b001fb21.js";import{R as P}from"./ResponsiveGrid-35b6c8ed.js";import"./index-4ce3d2a1.js";import"./index-c1c6ff9d.js";import"./index-69644529.js";import"./item_type-32dc6fdf.js";const V=c=>{const n=T(c),o=n.find(i=>i.key==="allow_register");return(o==null?void 0:o.value)!=="true"?n.filter(i=>i.key!=="default_role"):n},z=c=>{const n=v(),{pathname:o}=x();A(`manage.sidemenu.${o().split("/").pop()}`);const[i,k]=f(()=>g.get(`/admin/setting/list?group=${c.group}`)),[d,p]=_([]),l=async()=>{const e=await k();u(e,p)};l();const[w,I]=f(()=>g.post("/admin/setting/save",V(d))),[S,m]=C(!1),b=$(()=>{const e=[...d],r=e.findIndex(s=>s.key==="allow_indexed"),t=e.findIndex(s=>s.key==="use_newui");if(r!==-1&&t!==-1){if(t<r){const s=e.splice(t,1)[0];e.splice(r,0,s)}else if(t>r+1){const s=e.splice(t,1)[0];e.splice(r+1,0,s)}}return e});return a(R,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[a(P,{get children(){return a(B,{get each(){return b()},children:(e,r)=>a(M,L(e,{onChange:t=>{p(s=>e().key===s.key,"value",t)},onDelete:async()=>{m(!0);const t=await g.post(`/admin/setting/delete?key=${e().key}`);m(!1),u(t,()=>{h.success(n("global.delete_success")),l()})}}))})}}),a(N,{spacing:"$2",get children(){return[a(y,{colorScheme:"accent",onClick:l,get loading(){return i()||S()},get children(){return n("global.refresh")}}),a(y,{get loading(){return w()},onClick:async()=>{const e=await I();u(e,()=>h.success(n("global.save_success")))},get children(){return n("global.save")}})]}})]}})};export{z as default};
