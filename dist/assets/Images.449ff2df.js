import{bL as $,E as p,h as t,as as d,aE as k,aa as C,a8 as x,t as I,dF as i,aI as y,S as l,aR as _,aC as M,aD as m,ak as S,a as v,k as E,H as h,a3 as b,dg as L,l as f,bU as W,bV as F}from"./index.7ef6f74b.js";import{b as G}from"./style.233252db.js";import{I as O}from"./ImageWithError.1e250684.js";import{O as P,g as z}from"./icon.78f0dc07.js";import{I as H,u as j}from"./helper.928c7041.js";import{G as K}from"./GridItem.89d19903.js";import"./index.f7291a37.js";import"./Layout.6f6082f7.js";import"./useTitle.4c20f393.js";import"./FolderTree.e4291957.js";import"./index.bc4263a2.js";import"./index.ac86d4a1.js";import"./index.1168ba1e.js";const A=e=>{const{isHide:s}=$();if(s(e.obj)||e.obj.type!==P.IMAGE)return null;const{setPathAs:o}=p(),g=t(k,{get color(){return d()},boxSize:"$12",get as(){return z(e.obj)}}),{show:c}=G({id:1}),{rawLink:u}=C(),{openWithDoubleClick:n,toggleWithClick:a,restoreSelectionCache:w}=j();return t(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return t(x,{w:"$full",get classList(){return{selected:!!e.obj.selected}},class:"image-item viselect-item",get["data-index"](){return e.index},p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:`2px solid ${d()}`}},get cursor(){return n()||a()?"default":"pointer"},onMouseEnter:()=>{o(e.obj.name,e.obj.is_dir,!0)},onContextMenu:r=>{I(()=>{i(e.index,!0,!0)}),c(r,{props:e.obj})},get children(){return t(y,{w:"$full",pos:"relative",get children(){return[t(l,{get when(){return _()},get children(){return t(H,{pos:"absolute",left:"$1",top:"$1","on:mousedown":r=>{r.stopPropagation()},"on:click":r=>{r.stopPropagation()},get checked(){return e.obj.selected},onChange:r=>{i(e.index,r.target.checked)}})}}),t(O,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return t(M,{size:"lg"})},fallbackErr:g,get src(){return u(e.obj)},loading:"lazy","on:dblclick":()=>{!n()||(m.emit("gallery",e.obj.name),i(e.index,!0,!0))},"on:click":r=>{if(!n()&&!(r.ctrlKey||r.metaKey||r.shiftKey)&&!!w()){if(a())return i(e.index,!e.obj.selected);m.emit("gallery",e.obj.name)}}})]}})}})}})},ee=e=>{const s=v(),o=E(()=>t(L,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return t(h,{get each(){return b.objs.filter(n=>n.is_dir)},children:(n,a)=>t(K,{obj:n,get index(){return a()}})})}})),{isMouseSupported:g,registerSelectContainer:c,captureContentMenu:u}=j();return c(),t(x,{"oncapture:contextmenu":u,class:"viselect-container",spacing:"$2",w:"$full",get children(){return[t(l,{get when(){return f.show_folder_in_image_view==="top"},get children(){return o()}}),t(l,{get when(){return e.images.length>0},get fallback(){return t(W,{m:"$2",get children(){return s("home.no_images")}})},get children(){return t(F,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return t(h,{get each(){return b.objs},children:(n,a)=>t(A,{obj:n,get index(){return a()}})})}})}}),t(l,{get when(){return f.show_folder_in_image_view==="bottom"},get children(){return o()}})]}})};export{ee as default};
