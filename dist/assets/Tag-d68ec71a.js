import{b as x,B as o,dv as A,x as e,av as h,Q as d,ao as v,dw as B,dx as D,dy as b,W as f,dz as p,dA as O,dB as a,cI as I,cX as z,br as m,n as i,ai as E,dC as F,bq as H}from"./index-bbb652ad.js";import{g as R,A as W,u as X}from"./label-68bc06b1.js";import{D as q}from"./DeletePopover-f2cc109f.js";const j=()=>{const t=x(),{labels:L,refetch:$}=X(),[y,g]=o(!1),[C,l]=o(!1),[T,s]=o(null),[S,_]=A(r=>H.post(`/admin/label/delete?id=${r}`)),c=async()=>{try{g(!0),await $(),i.success(t("global.refresh_success"))}catch{i.error(t("global.refresh_failed"))}finally{g(!1)}},w=(r,n,u)=>{c()},k=async r=>{const n=await F(r);m(n,u=>{s(u),l(!0)})};return e(E,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(h,{spacing:"$2",get children(){return[e(d,{colorScheme:"accent",get loading(){return y()},onClick:c,get children(){return t("global.refresh")}}),e(d,{onClick:()=>{s(null),l(!0)},get children(){return t("global.add")}})]}}),e(v,{w:"$full",overflowX:"auto",get children(){return e(B,{highlightOnHover:!0,dense:!0,get children(){return[e(D,{get children(){return e(b,{get children(){return[e(f,{each:["name","description","create_time"],children:r=>e(p,{get children(){return t(`home.tag.${r}`)}})}),e(p,{get children(){return t("global.operations")}})]}})}}),e(O,{get children(){return e(f,{get each(){var r,n;return(n=(r=L())==null?void 0:r.data)==null?void 0:n.content},children:r=>e(b,{get children(){return[e(a,{get children(){return e(I,{get bgColor(){return R(r.bg_color)},get color(){return r.bg_color},textTransform:"none",px:"$3",py:"$2",rounded:"$md",fontSize:"$sm",get children(){return r.name}})}}),e(a,{get children(){return r.description}}),e(a,{get children(){return z(r.create_time)}}),e(a,{get children(){return e(h,{spacing:"$2",get children(){return[e(d,{colorScheme:"accent",onClick:()=>k(r.id),get children(){return t("global.edit")}}),e(q,{get name(){return r.name},get loading(){return S()===r.id},onClick:async()=>{const n=await _(r.id);m(n,()=>{i.success(t("global.delete_success")),c()})}})]}})}})]}})})}})]}})}}),e(W,{get isOpen(){return C()},onClose:()=>{l(!1),s(null)},onSubmit:w,get editingLabel(){return T()}})]}})};export{j as default};
