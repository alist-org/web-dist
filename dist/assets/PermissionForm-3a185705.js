import{b as H,d as O,cH as q,b9 as d,e6 as W,q as z,e7 as B,e8 as M,x as e,bW as R,ap as D,ai as m,bR as l,bE as c,L as h,bG as j,bH as E,ao as G,S as b,bI as N,W as $,d$ as f,e0 as S,e1 as Q,aW as u,am as U,bL as V,bM as A,bN as J,av as k,bb as K,bO as X,Q as v,br as x,n as P}from"./index-bbb652ad.js";const Z=()=>{const n=H(),{params:C,back:g}=O(),{id:i}=C,[s,o]=q({name:"",description:"",permission:0,path_pattern:"/**"}),[y,_]=d(()=>W(parseInt(i))),w=async()=>{if(i){const r=await _();x(r,t=>{o({name:t.name,description:t.description,permission:t.permission,path_pattern:t.path_pattern})})}};z(()=>{w()});const I=()=>s.name.trim()?!0:(P.error(n("permissions.config.permissions_name")+n("global.required")),!1),[L,T]=d(async()=>I()?i?B({...s,id:parseInt(i)}):M(s):Promise.reject()),a=()=>u.filter((r,t)=>(s.permission>>t&1)===1),p=r=>{const t=1<<r;o("permission",s.permission^t)};return e(m,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(R,{get children(){return n(i?"global.edit":"global.add")}}),e(D,{get loading(){return y()},get children(){return e(m,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(l,{required:!0,get children(){return[e(c,{get children(){return n("permissions.config.permissions_name")}}),e(h,{get value(){return s.name},onInput:r=>o("name",r.currentTarget.value)})]}}),e(l,{get children(){return[e(c,{get children(){return n("permissions.config.permissions_description")}}),e(h,{get value(){return s.description},onInput:r=>o("description",r.currentTarget.value)})]}}),e(l,{required:!0,get children(){return[e(c,{get children(){return n("permissions.config.permissions_permissions")}}),e(j,{multiple:!0,get value(){return a()},get children(){return[e(E,{get children(){return e(G,{display:"flex",flexWrap:"wrap",gap:"$2",pr:"$6",py:"$2",minH:"40px",alignItems:"center",get children(){return e(b,{get when(){return a().length>0},get fallback(){return e(N,{get children(){return n("permissions.config.select_permissions")}})},get children(){return[e($,{get each(){return a().slice(0,3)},children:(r,t)=>e(f,{size:"lg",variant:"subtle",bgColor:"$neutral2",rounded:"$sm",px:"$3",py:"$1",get children(){return[e(S,{get children(){return n(`users.permissions.${r}`)}}),e(Q,{onClick:F=>{F.stopPropagation(),p(u.indexOf(r))}})]}})}),e(b,{get when(){return a().length>3},get children(){return e(f,{size:"lg",variant:"subtle",bgColor:"$neutral2",rounded:"$sm",px:"$3",py:"$1",get children(){return e(S,{get children(){return["+",U(()=>a().length-3)]}})}})}})]}})}})}}),e(V,{get children(){return e(A,{get children(){return e($,{each:u,children:(r,t)=>e(J,{value:r,onClick:()=>p(t()),get children(){return e(k,{spacing:"$2",w:"$full",pl:"$4",fontSize:"$lg",get children(){return[e(K,{get checked(){return(s.permission>>t()&1)===1},readOnly:!0}),e(X,{get children(){return n(`users.permissions.${r}`)}})]}})}})})}})}})]}})]}}),e(k,{spacing:"$2",get children(){return[e(v,{get loading(){return L()},onClick:async()=>{const r=await T();x(r,()=>{P.success(n("global.save_success")),g()})},get children(){return n("global.save")}}),e(v,{colorScheme:"accent",onClick:()=>g(),get children(){return n("global.back")}})]}})]}})}})]}})};export{Z as default};
