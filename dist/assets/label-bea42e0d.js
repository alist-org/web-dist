import{b as O,B as l,H as y,dR as M,br as B,x as e,M as F,I,bu as R,J as T,am as W,K as k,ai as L,bR as c,bE as u,L as $,av as C,ao as A,cr as H,bW as D,W as E,ah as p,aX as q,O as z,Q as S,R as N,dS as h,dT as V,dU as j,aN as J,al as K,dV as Q}from"./index-bcc8ecfe.js";const P=(t,a=.2)=>{if(t.startsWith("#")){const n=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16);return`rgba(${n}, ${i}, ${s}, ${a})`}return t.startsWith("rgb(")?t.replace("rgb(","rgba(").replace(")",`, ${a})`):t.startsWith("rgba(")?t.replace(/[\d.]+\)$/,`${a})`):t},m=["#ff776e","#feb34a","#62e56f","#4e9cff","#d17bff"],Y=t=>{const a=O(),[n,i]=l(""),[s,o]=l(""),[v,b]=l(!1),[d,g]=l(m[0]),[w,f]=l([]);y(()=>{t.editingLabel?(i(t.editingLabel.name),o(t.editingLabel.description||""),g(t.editingLabel.bg_color),M(t.editingLabel.id).then(r=>{B(r,x=>{f(x||[])})})):(i(""),o(""),g(m[0]),f([]))});const _=async()=>{if(!n()){h.show({title:a("home.tag.name"),description:a("home.tag.name_required"),status:"warning"});return}try{b(!0),t.editingLabel?await V(t.editingLabel.id,n(),s(),d()):await j(n(),s(),d()),t.onSubmit(n(),s(),d()),i(""),o(""),t.onClose(),J.emit("refresh_labels"),h.show({title:a("home.tag.name"),description:t.editingLabel?a("home.tag.update_success"):a("home.tag.create_success"),status:"success"})}catch(r){h.show({title:a("home.tag.name"),description:r.message||(t.editingLabel?a("home.tag.update_failed"):a("home.tag.create_failed")),status:"danger"})}finally{b(!1)}};return e(N,{get opened(){return t.isOpen},get onClose(){return t.onClose},get children(){return[e(F,{}),e(I,{get children(){return[e(R,{}),e(T,{get children(){return W(()=>!!t.editingLabel,!0)()?a("home.tag.edit"):a("home.tag.add")}}),e(k,{get children(){return e(L,{spacing:"$3",get children(){return[e(c,{required:!0,get children(){return[e(u,{get children(){return a("home.tag.name")}}),e($,{get placeholder(){return a("home.tag.name")},get value(){return n()},onChange:r=>i(r.currentTarget.value)})]}}),e(c,{get children(){return[e(u,{get children(){return a("home.tag.description")}}),e($,{get placeholder(){return a("home.tag.description")},get value(){return s()},onChange:r=>o(r.currentTarget.value)})]}}),e(c,{get children(){return[e(u,{get children(){return a("home.tag.color")}}),e(C,{spacing:"$4",justifyContent:"start",get children(){return m.map(r=>e(A,{as:"button",type:"button",w:"$7",h:"$7",rounded:"$full",bgColor:r,cursor:"pointer",get border(){return d()===r?"3px solid $neutral8":"none"},_hover:{transform:"scale(1.1)"},transition:"all 0.2s",onClick:()=>g(r)}))}})]}}),e(H,{}),e(c,{get children(){return[e(D,{mb:"$4",get children(){return a("home.tag.related_files")}}),e(L,{spacing:"$2",alignItems:"stretch",get children(){return e(E,{get each(){return w()},children:r=>e(C,{p:"$4",bg:"$neutral3",rounded:"$md",spacing:"$2",overflow:"hidden",alignItems:"center",get children(){return[e(p,{flex:"2",fontSize:"$md",noOfLines:1,get children(){return r.name}}),e(q,{get label(){return r.path},placement:"top",get children(){return e(p,{flex:"3",fontSize:"$sm",color:"$neutral11",noOfLines:1,css:{direction:"rtl",textAlign:"left",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},get children(){return r.path}})}})]}})})}})]}})]}})}}),e(z,{get children(){return[e(S,{colorScheme:"primary",get onClick(){return t.onClose},mr:"$2",get children(){return a("global.cancel")}}),e(S,{onClick:_,get loading(){return v()},get children(){return a("global.confirm")}})]}})]}})]}})},[U,{refetch:X}]=K(Q),Z=()=>({labels:U,refetch:X});export{Y as A,P as g,Z as u};
