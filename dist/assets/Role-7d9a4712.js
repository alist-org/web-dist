import{b as k,d as w,B as r,q as v,x as e,av as u,Q as l,ao as C,dv as D,dw as x,dx as h,W as m,dy as p,dz as S,dA as i,ai as B,dH as H,br as f,dI as _,n as L}from"./index-e0a86cdb.js";import{D as P}from"./DeletePopover-6feef89a.js";const A=()=>{const n=k(),{to:d}=w(),[b,y]=r([]);r([]);const[R,o]=r(!1),[T,c]=r(null),s=async()=>{o(!0);try{const[t]=await Promise.all([H()]);f(t,a=>{y(a.content)})}finally{o(!1)}};v(()=>{s()});const $=async t=>{c(t.id);try{const a=await _(t.id);f(a,()=>{L.success(n("global.delete_success")),s()})}finally{c(null)}},g=t=>t===1||t===2;return e(B,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(u,{spacing:"$2",get children(){return[e(l,{colorScheme:"accent",get loading(){return R()},onClick:s,get children(){return n("global.refresh")}}),e(l,{onClick:()=>{d("/@manage/permissions/add")},get children(){return n("global.add")}})]}}),e(C,{w:"$full",overflowX:"auto",get children(){return e(D,{highlightOnHover:!0,dense:!0,get children(){return[e(x,{get children(){return e(h,{get children(){return[e(m,{each:["role_name","role_description"],children:t=>e(p,{get children(){return n(`permissions.role.${t}`)}})}),e(p,{get children(){return n("global.operations")}})]}})}}),e(S,{get children(){return e(m,{get each(){return b()},children:t=>e(h,{get children(){return[e(i,{get children(){return t.name}}),e(i,{get children(){return t.description}}),e(i,{get children(){return e(u,{spacing:"$2",get children(){return[e(l,{get disabled(){return g(t.id)},onClick:()=>{d(`/@manage/permissions/edit/${t.id}`)},get children(){return n("global.edit")}}),e(P,{get name(){return t.name},get loading(){return T()===t.id},get disabled(){return g(t.id)},onClick:()=>$(t)})]}})}})]}})})}})]}})}})]}})};export{A as default};
