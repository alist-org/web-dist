import{u as j,a as V,_ as Xe,g as Bt,b as Vt,o as _,p as Me,O as x,S as C,h as pt,c as Cn,n as Z,d as O,s as re,l as Ut,e as Ce,f as r,M as Ee,i as Ae,j as Te,k as Fe,m as E,I as zt,T as Sn,F as _n,q as ot,B as oe,r as Pe,t as Y,v as je,w as xn,x as On,y as kn,z as Ht,L as Nt,A as Mn,C as En,D as An,E as pe,G as we,H as ve,J as Le,K as Wt,N as at,P as st,Q as Se,R as it,U as B,V as Tn,W as ae,X as Fn,Y as Re,Z as Pn,$ as jn,a0 as H,a1 as Ln,a2 as _e,a3 as xe,a4 as lt,a5 as ct,a6 as Rn,a7 as ge,a8 as Ue,a9 as ut,aa as J,ab as qt,ac as Dn,ad as dt,ae as In,af as Bn,ag as w,ah as ht,ai as mt,aj as Kt,ak as De,al as Vn,am as Un,an as zn,ao as Ie,ap as Gt,aq as Hn,ar as A,as as L,at as Xt,au as Qt,av as Zt,aw as Nn,ax as Wn,ay as qn,az as bt,aA as Jt,aB as Qe,aC as Kn,aD as Gn,aE as Xn,aF as Qn,aG as Zn,aH as Jn,aI as wt,aJ as Yn,aK as er,aL as tr,aM as nr,aN as ee,aO as rr,aP as or,aQ as ar,aR as sr,aS as ir,aT as lr,aU as cr,aV as ur,aW as dr,aX as hr,aY as gr,aZ as fr,a_ as pr,a$ as mr,b0 as br}from"./index.81d7fc02.js";import{u as wr,a as vr}from"./useTitle.832e66e0.js";import{M as Yt}from"./Markdown.0a8d8dc5.js";import{f as yr,a as $r,b as Cr,c as Sr,d as _r,e as xr,g as Or,h as kr,i as Mr,j as Er}from"./api.a99717b4.js";import{u as Ar,a as en,b as Tr}from"./useUtil.19e08d2e.js";import{A as Fr,F as tn,B as nn,a as rn,b as Pr,C as jr,c as Lr,d as Rr,T as Dr,e as vt}from"./index.ddd9b3ec.js";import{R as Ir}from"./index.fdfdfbe3.js";import{M as on}from"./FolderTree.3f8b93bb.js";const Br=(e,...t)=>{},Ze=new Map,Vr=(e,t)=>{Ze.set(e,t)},an=e=>{window.scroll({top:Ze.get(e)||0,behavior:"smooth"}),Br("recoverScroll",e,Ze.get(e))};let ye;function Ur(e,t,n="replaceState"){let o=n==="location"?location.href:location.hash;if(!o.includes("?"))o=`${o}?${e}=${t}`;else if(!o.includes(e))o=`${o}&${e}=${t}`;else{const a=`(\\?|&|#)${e}([^&|^#]*)(&|$|#)`;o=o.replace(new RegExp(a),"$1"+e+"="+t+"$3")}n==="location"&&(location.href=o),n==="pushState"&&history.pushState({},"",o),n==="replaceState"&&history.replaceState({},"",o)}function yt(e){for(var t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var a=n[o].split("=");if(a[0]==e)return a[1]}return""}const ze={};let D=1;const Na=()=>D,zr=()=>{const e=Bt();D=1,e.type==="pagination"&&Ur("page",1),console.log("resetGlobalPage",D)},U=()=>{const{pathname:e}=j(),[,t]=V(u=>yr(u,Xe())),n=Bt();n.type==="pagination"&&yt("page")&&(D=parseInt(yt("page")));const[,o]=V(u=>{const h={index:u==null?void 0:u.index,size:u==null?void 0:u.size};return $r(u==null?void 0:u.path,Xe(),h.index,h.size,u==null?void 0:u.force,new Vt.CancelToken(function(b){ye=b}))}),a=(u,h=!0,g=!1)=>{g&&(u=Me(e(),u)),h?ze[u]=!0:delete ze[u]};let i=!1;const s=(u,h,g)=>{ye==null||ye(),i=h!=null?h:!1,c(""),ze[u]?d(u,D,void 0,void 0,g):l(u)},l=async u=>{x.setState(C.FetchingObj);const h=await t(u);pt(h,g=>{var b;x.setObj(g),x.setProvider(g.provider),g.is_dir?(a(u),d(u,D)):(x.setReadme(g.readme),x.setRelated((b=g.related)!=null?b:[]),x.setRawUrl(g.raw_url),x.setState(C.File))},c)},d=async(u,h,g,b=!1,p)=>{g||(g=n.size),g!==void 0&&n.type==="all"&&(g=void 0),D=h!=null?h:1,x.setState(b?C.FetchingMore:C.FetchingObjs);const v=await o({path:u,index:h,size:g,force:p});pt(v,$=>{var k;b?Cn($.content):(x.setObjs((k=$.content)!=null?k:[]),x.setTotal($.total)),x.setReadme($.readme),x.setWrite($.write),x.setProvider($.provider),x.setState(C.Folder),b&&(h!=null?h:1)>1||an(u)},c)},c=(u,h)=>{h===403?(x.setState(C.NeedPassword),i&&Z.error(u)):x.setErr(u)},m=(u,h,g=!1)=>{d(e(),u,h,g)};return{handlePathChange:s,setPathAs:a,refresh:(u,h)=>{s(e(),u,h)},pageChange:m,loadMore:()=>{m(D+1,void 0,!0)},allLoaded:()=>D>=Math.ceil(_.total/n.size)}},Hr=()=>{const{rawLinks:e}=Ar(),{rawLink:t}=en(),n=O();return{batchDownloadSelected:()=>{e(!0).forEach(a=>{window.open(a,"_blank")})},sendToAria2:async()=>{const o=re().filter(l=>!l.is_dir),{aria2_rpc_url:a,aria2_rpc_secret:i,aria2_dir:s}=Ut;if(!a){Z.warning(n("home.toolbar.aria2_not_set"));return}try{for(const l of o){const d=await Vt.post(a,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.addUri",params:["token:"+i,[t(l)],{out:l.name,"check-certificate":"false"}]});console.log(d)}Z.success(n("home.toolbar.send_aria2_success"))}catch(l){console.error(l),Z.error(`failed to send to aria2: ${l}`)}}}},Be=e=>{var i;const[t,n]=Ce((i=e.defaultValue)!=null?i:""),o=O(),a=()=>{var s;if(!t()){Z.warning(o("global.empty_input"));return}(s=e.onSubmit)==null||s.call(e,t()),n("")};return r(Pe,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[r(Ee,{}),r(Ae,{get children(){return[r(Te,{get children(){return o(e.title)}}),r(Fe,{get children(){return[r(E,{get when(){return e.type==="text"},get fallback(){return r(zt,{id:"modal-input",get type(){return e.type},get value(){return t()},onInput:s=>{n(s.currentTarget.value)},onKeyDown:s=>{s.key==="Enter"&&a()}})},get children(){return r(Sn,{id:"modal-input",get value(){return t()},onInput:s=>{n(s.currentTarget.value)}})}}),r(E,{get when(){return e.tips},get children(){return r(_n,{get children(){return e.tips}})}})]}}),r(ot,{display:"flex",gap:"$2",get children(){return[r(oe,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return o("global.cancel")}}),r(oe,{get loading(){return e.loading},onClick:()=>a(),get children(){return o("global.ok")}})]}})]}})]}})},Nr=()=>{const{pathname:e}=j(),t=Y(()=>["",...e().split("/").filter(Boolean)]),n=O(),{setPathAs:o}=U();return r(An,{class:"nav",w:"$full",get children(){return r(je,{get each(){return t()},children:(a,i)=>{const s=Y(()=>i()===t().length-1),l=t().slice(0,i()+1).join("/"),d=xn(l);let c=()=>a;return c()===""&&(c=()=>pe("home_icon")+n("manage.sidemenu.home")),r(On,{class:"nav-item",get children(){return[r(kn,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{bgColor:Ht(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return s()},get as(){return s()?void 0:Nt},get href(){return Mn(d)},onMouseEnter:()=>o(l),children:c}),r(E,{get when(){return!s()},get children(){return r(En,{class:"nav-separator"})}})]}})}})}})},Wr=we(()=>ve(()=>import("./Folder.fcede3aa.js").then(e=>e.F),["assets/Folder.fcede3aa.js","assets/Folder.b511ba9e.css","assets/index.81d7fc02.js","assets/index.659f4289.css","assets/useUtil.19e08d2e.js","assets/api.a99717b4.js","assets/index.ddd9b3ec.js","assets/icon.ced807ba.js"])),qr=we(()=>ve(()=>import("./File.57a539d5.js").then(e=>e.a),["assets/File.57a539d5.js","assets/index.81d7fc02.js","assets/index.659f4289.css","assets/useUtil.19e08d2e.js","assets/api.a99717b4.js","assets/icon.ced807ba.js","assets/index.ddd9b3ec.js"])),Kr=we(()=>ve(()=>import("./Password.a79dbda6.js"),["assets/Password.a79dbda6.js","assets/index.81d7fc02.js","assets/index.659f4289.css","assets/index.ddd9b3ec.js","assets/useTitle.832e66e0.js","assets/Markdown.0a8d8dc5.js","assets/api.a99717b4.js","assets/useUtil.19e08d2e.js","assets/index.fdfdfbe3.js","assets/FolderTree.3f8b93bb.js"]));let $t=!0;const Gr=()=>{const e=Le("white","$neutral3"),{pathname:t}=j(),{handlePathChange:n}=U();let o=t();return Wt(at(t,a=>{wr(),$t||zr(),$t=!1,Vr(o,window.scrollY),n(a),o=a})),r(ae,{class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return e()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return r(st,{get fallback(){return r(Se,{})},get children(){return r(it,{get children(){return[r(B,{get when(){return _.err},get children(){return r(Tn,{get msg(){return _.err},disableColor:!0})}}),r(B,{get when(){return[C.FetchingObj,C.FetchingObjs].includes(_.state)},get children(){return r(Se,{})}}),r(B,{get when(){return _.state===C.NeedPassword},get children(){return r(Kr,{})}}),r(B,{get when(){return[C.Folder,C.FetchingMore].includes(_.state)},get children(){return r(Wr,{})}}),r(B,{get when(){return _.state===C.File},get children(){return r(qr,{})}})]}})}})}})},Xr=()=>{const e=Le("white","$neutral3"),{proxyLink:t}=en(),{pathname:n}=j(),o=Y(at(()=>_.state,()=>{if(![C.FetchingMore,C.Folder,C.File].includes(_.state))return"";if(_.readme)return _.readme;if([C.FetchingMore,C.Folder].includes(_.state)){const s=_.objs.find(l=>l.name.toLowerCase()==="readme.md");if(s)return t(s,!0)}return""})),a=async s=>{let l={content:s};return/^https?:\/\//g.test(s)&&(l=await Cr(s)),setTimeout(()=>{an(n())}),l},[i]=Fn(o,a);return r(E,{get when(){return o()},get children(){return r(Re,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return e()},shadow:"$lg",get children(){return r(Pn,{get loading(){return i.loading},get children(){return r(Yt,{get children(){var s;return(s=i())==null?void 0:s.content}})}})}})}})},sn=e=>{const t=pe("home_container");return r(it,{get fallback(){return r(Re,{w:"min(99%, 980px)",get children(){return e.children}})},get children(){return r(B,{when:t==="hope_container",get children(){return r(jn,{get children(){return e.children}})}})}})},Qr=()=>r(sn,{get children(){return r(ae,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[r(Nr,{}),r(Gr,{}),r(Xr,{})]}})}}),Zr=lt("<span>|</span>"),Jr=()=>{const e=O();return r(ae,{class:"footer",w:"$full",py:"$4",get children(){return r(H,{spacing:"$1",get children(){return[r(Ln,{href:"https://github.com/Xhofe/alist",external:!0,get children(){return e("home.footer.powered_by")}}),Zr.cloneNode(!0),r(Fr,{as:Nt,get href(){return _e.is_guest(xe())?"/@login":"/@manage"},get children(){return e(_e.is_guest(xe())?"login.login":"home.footer.manage")}})]}})}})},Ct={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},le="^\\s*",ce="\\s*$",G="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",X="([0-9A-Fa-f])",Q="([0-9A-Fa-f]{2})",Yr=new RegExp(`${le}rgb\\s*\\(${G},${G},${G}\\)${ce}`),eo=new RegExp(`${le}rgba\\s*\\(${G},${G},${G},${G}\\)${ce}`),to=new RegExp(`${le}#${X}${X}${X}${ce}`),no=new RegExp(`${le}#${Q}${Q}${Q}${ce}`),ro=new RegExp(`${le}#${X}${X}${X}${X}${ce}`),oo=new RegExp(`${le}#${Q}${Q}${Q}${Q}${ce}`);function M(e){return parseInt(e,16)}function ln(e){try{let t;if(t=no.exec(e))return[M(t[1]),M(t[2]),M(t[3]),1];if(t=Yr.exec(e))return[I(t[1]),I(t[5]),I(t[9]),1];if(t=eo.exec(e))return[I(t[1]),I(t[5]),I(t[9]),He(t[13])];if(t=to.exec(e))return[M(t[1]+t[1]),M(t[2]+t[2]),M(t[3]+t[3]),1];if(t=oo.exec(e))return[M(t[1]),M(t[2]),M(t[3]),He(M(t[4])/255)];if(t=ro.exec(e))return[M(t[1]+t[1]),M(t[2]+t[2]),M(t[3]+t[3]),He(M(t[4]+t[4])/255)];if(e in Ct)return ln(Ct[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function ao(e){return e>1?1:e<0?0:e}function St(e,t,n,o){return`rgba(${I(e)}, ${I(t)}, ${I(n)}, ${ao(o)})`}function _t(e,t){const[n,o,a,i=1]=Array.isArray(e)?e:ln(e);return t.alpha?St(n,o,a,t.alpha):St(n,o,a,i)}function He(e){const t=Math.round(Number(e)*100)/100;return t>1?1:t<0?0:t}function I(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}const so={list:tn,grid:nn,image:rn},io=()=>{const e=O();return r(dt,{get children(){return[r(ct,{as:Rn,get color(){return ge()},get bgColor(){return _t(ge(),{alpha:.15})},get _hover(){return{bgColor:_t(ge(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return r(it,{get children(){return[r(B,{get when(){return Ue()==="list"},get children(){return r(tn,{})}}),r(B,{get when(){return Ue()==="grid"},get children(){return r(nn,{})}}),r(B,{get when(){return Ue()==="image"},get children(){return r(rn,{})}})]}})}}),r(ut,{get children(){return r(je,{get each(){return Object.entries(so)},children:t=>r(J,{get icon(){return r(qt,{get component(){return t[1]}})},onSelect:()=>{Dn(t[0])},get children(){return e(`home.layouts.${t[0]}`)}})})}})]}})},lo=()=>{const e=pe("logo").split(`
`),t=Le(e[0],e.pop());return r(Kt,{class:"header",w:"$full",get children(){return r(sn,{get children(){return r(H,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[r(H,{class:"header-left",h:"44px",get children(){return r(In,{get src(){return t()},h:"$full",w:"auto",get fallback(){return r(Bn,{})}})}}),r(H,{class:"header-right",spacing:"$2",get children(){return r(E,{get when(){return _.state===C.Folder},get children(){return[r(H,{bg:"$neutral4",w:"$32",p:"$2",rounded:"$md",justifyContent:"space-between",border:"2px solid transparent",cursor:"pointer",_hover:{borderColor:"$info6"},onClick:()=>{w.emit("tool","search")},get children(){return[r(ht,{as:Pr}),r(H,{get children(){return[r(mt,{children:"Ctrl"}),r(mt,{children:"K"})]}})]}}),r(io,{})]}})}})]}})}})}})};function co(e){return De({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l3 3 8-8"/><path d="M20 12v6a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h9"/>'},e)}function uo(e){return De({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><rect width="12" height="12" x="8" y="8" rx="2"/><path d="M16 8V6a2 2 0 00-2-2H6a2 2 0 00-2 2v8a2 2 0 002 2h2"/>'},e)}function ho(e){return De({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M14 3v4a1 1 0 001 1h4"/><path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2zM9 15h6"/><path d="M12.5 17.5L15 15l-2.5-2.5"/>'},e)}function go(e){return De({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5 0 005 0l4-4a3.5 3.5 0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5 0 00-5 0l-4 4a3.5 3.5 0 005 5l.5-.5"/>'},e)}const fe={rename:{icon:jr,color:"$accent9"},copy:{icon:uo,color:"$success9"},move:{icon:ho,color:"$warning9"},delete:{icon:Vn,color:"$danger9"},copy_link:{icon:go,color:"$info9"},mkdir:{icon:Lr,p:!0},new_file:{icon:Rr,p:!0},cancel_select:{icon:Dr},download:{icon:Un,color:"$primary9"}},Oe=e=>{const t=zn.findIndex(o=>o===e.name);if(t!==-1&&!_e.can(xe(),t))return null;const n=O();return r(Gt,{placement:"top",withArrow:!0,get label(){return n(`home.toolbar.${e.name}`)},get children(){return r(ht,Ie({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:Ht()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){var o;return(o=fe[e.name])!=null&&o.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){var o;return(o=fe[e.name])==null?void 0:o.icon},get color(){var o;return(o=fe[e.name])==null?void 0:o.color}},e))}})},R=e=>{const t=O();return r(Gt,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return t(`home.toolbar.${e.tips}`)},get children(){return r(ht,Ie({get color(){return ge()},get _hover(){return{bgColor:ge(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},fo=()=>{const e=O(),{copySelectedPreviewPage:t,copySelectedRawLink:n}=Tr(),o="neutral";return r(dt,{placement:"top",offset:10,get children(){return[r(ct,{as:Oe,name:"copy_link"}),r(ut,{get children(){return[r(J,{colorScheme:o,onSelect:()=>{t()},get children(){return e("home.toolbar.preview_page")}}),r(J,{colorScheme:o,onSelect:()=>{n()},get children(){return e("home.toolbar.down_link")}}),r(J,{colorScheme:o,onSelect:()=>{n(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})},po=lt("<p></p>"),mo=()=>{const e=O(),t="neutral",{batchDownloadSelected:n,sendToAria2:o}=Hr();return r(dt,{placement:"top",offset:10,get children(){return[r(ct,{as:Oe,name:"download"}),r(ut,{get children(){return[r(J,{colorScheme:t,onSelect:n,get children(){return e("home.toolbar.batch_download")}}),r(E,{get when(){return _e.is_admin(xe())||Hn("package_download")},get children(){return r(J,{colorScheme:t,onSelect:()=>{w.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}})}}),r(J,{colorScheme:t,onSelect:o,get children(){return e("home.toolbar.send_aria2")}})]}})]}})},bo=we(()=>ve(()=>import("./PackageDownload.51673d81.js"),["assets/PackageDownload.51673d81.js","assets/index.81d7fc02.js","assets/index.659f4289.css","assets/api.a99717b4.js","assets/useUtil.19e08d2e.js"])),wo=()=>{const e=O(),t=l=>{l==="package_download"&&o()};w.on("tool",t),A(()=>{w.off("tool",t)});const{isOpen:n,onOpen:o,onClose:a}=L(),[i,s]=Ce("pre_tips");return r(Pe,{blockScrollOnMount:!1,get opened(){return n()},onClose:a,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[r(Ee,{}),r(Ae,{get children(){return[r(Te,{get children(){return e("home.toolbar.package_download")}}),r(st,{get fallback(){return r(Se,{})},get children(){return r(E,{get when(){return i()==="pre_tips"},get fallback(){return r(bo,{onClose:a})},get children(){return[r(Fe,{get children(){const l=po.cloneNode(!0);return Xt(l,()=>e("home.toolbar.pre_package_download-tips")),l}}),r(ot,{display:"flex",gap:"$2",get children(){return[r(oe,{onClick:a,colorScheme:"neutral",get children(){return e("global.cancel")}}),r(oe,{colorScheme:"info",onClick:()=>{s("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})};function cn(e,t){e.indexOf(t)===-1&&e.push(t)}function vo(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const un=(e,t,n)=>Math.min(Math.max(n,e),t),P={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},me=e=>typeof e=="number",ne=e=>Array.isArray(e)&&!me(e[0]),yo=(e,t,n)=>{const o=t-e;return((n-e)%o+o)%o+e};function $o(e,t){return ne(e)?e[yo(0,e.length,t)]:e}const dn=(e,t,n)=>-n*e+n*t+e,hn=()=>{},N=e=>e,gt=(e,t,n)=>t-e===0?1:(n-e)/(t-e);function gn(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const a=gt(0,t,o);e.push(dn(n,1,a))}}function Co(e){const t=[0];return gn(t,e-1),t}function So(e,t=Co(e.length),n=N){const o=e.length,a=o-t.length;return a>0&&gn(t,a),i=>{let s=0;for(;s<o-2&&!(i<t[s+1]);s++);let l=un(0,1,gt(t[s],t[s+1],i));return l=$o(n,s)(l),dn(e[s],e[s+1],l)}}const fn=e=>Array.isArray(e)&&me(e[0]),Je=e=>typeof e=="object"&&Boolean(e.createAnimation),be=e=>typeof e=="function",_o=e=>typeof e=="string",Ne={ms:e=>e*1e3,s:e=>e/1e3},pn=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,xo=1e-7,Oo=12;function ko(e,t,n,o,a){let i,s,l=0;do s=t+(n-t)/2,i=pn(s,o,a)-e,i>0?n=s:t=s;while(Math.abs(i)>xo&&++l<Oo);return s}function de(e,t,n,o){if(e===t&&n===o)return N;const a=i=>ko(i,0,1,e,n);return i=>i===0||i===1?i:pn(a(i),t,o)}const Mo=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const o=n*e,a=t==="end"?Math.floor(o):Math.ceil(o);return un(0,1,a/e)},xt={ease:de(.25,.1,.25,1),"ease-in":de(.42,0,1,1),"ease-in-out":de(.42,0,.58,1),"ease-out":de(0,0,.58,1)},Eo=/\((.*?)\)/;function Ot(e){if(be(e))return e;if(fn(e))return de(...e);if(xt[e])return xt[e];if(e.startsWith("steps")){const t=Eo.exec(e);if(t){const n=t[1].split(",");return Mo(parseFloat(n[0]),n[1].trim())}}return N}class Ao{constructor(t,n=[0,1],{easing:o,duration:a=P.duration,delay:i=P.delay,endDelay:s=P.endDelay,repeat:l=P.repeat,offset:d,direction:c="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=N,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((u,h)=>{this.resolve=u,this.reject=h}),o=o||P.easing,Je(o)){const u=o.createAnimation(n);o=u.easing,n=u.keyframes||n,a=u.duration||a}this.repeat=l,this.easing=ne(o)?N:Ot(o),this.updateDuration(a);const m=So(n,d,ne(o)?o.map(Ot):N);this.tick=u=>{var h;i=i;let g=0;this.pauseTime!==void 0?g=this.pauseTime:g=(u-this.startTime)*this.rate,this.t=g,g/=1e3,g=Math.max(g-i,0),this.playState==="finished"&&this.pauseTime===void 0&&(g=this.totalDuration);const b=g/this.duration;let p=Math.floor(b),v=b%1;!v&&b>=1&&(v=1),v===1&&p--;const $=p%2;(c==="reverse"||c==="alternate"&&$||c==="alternate-reverse"&&!$)&&(v=1-v);const k=g>=this.totalDuration?1:Math.min(v,1),S=m(this.easing(k));t(S),this.pauseTime===void 0&&(this.playState==="finished"||g>=this.totalDuration+s)?(this.playState="finished",(h=this.resolve)===null||h===void 0||h.call(this,S)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(t=this.reject)===null||t===void 0||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){this.pauseTime!==void 0||this.rate===0?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}class To{setAnimation(t){this.animation=t,t==null||t.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const We=new WeakMap;function mn(e){return We.has(e)||We.set(e,{transforms:[],values:new Map}),We.get(e)}function Fo(e,t){return e.has(t)||e.set(t,new To),e.get(t)}const Po=["","X","Y","Z"],jo=["translate","scale","rotate","skew"],se={x:"translateX",y:"translateY",z:"translateZ"},kt={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},Lo={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:kt,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:N},skew:kt},ie=new Map,Ve=e=>`--motion-${e}`,ke=["x","y","z"];jo.forEach(e=>{Po.forEach(t=>{ke.push(e+t),ie.set(Ve(e+t),Lo[e])})});const Ro=(e,t)=>ke.indexOf(e)-ke.indexOf(t),Do=new Set(ke),ft=e=>Do.has(e),Io=(e,t)=>{se[t]&&(t=se[t]);const{transforms:n}=mn(e);cn(n,t),e.style.transform=bn(n)},bn=e=>e.sort(Ro).reduce(Bo,"").trim(),Bo=(e,t)=>`${e} ${t}(var(${Ve(t)}))`,Ye=e=>e.startsWith("--"),Mt=new Set;function Vo(e){if(!Mt.has(e)){Mt.add(e);try{const{syntax:t,initialValue:n}=ie.has(e)?ie.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:n})}catch{}}}const qe=(e,t)=>document.createElement("div").animate(e,t),Et={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{qe({opacity:[1]})}catch{return!1}return!0},finished:()=>Boolean(qe({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{qe({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},Ke={},te={};for(const e in Et)te[e]=()=>(Ke[e]===void 0&&(Ke[e]=Et[e]()),Ke[e]);const Uo=.015,zo=(e,t)=>{let n="";const o=Math.round(t/Uo);for(let a=0;a<o;a++)n+=e(gt(0,o-1,a))+", ";return n.substring(0,n.length-2)},At=(e,t)=>be(e)?te.linearEasing()?`linear(${zo(e,t)})`:P.easing:fn(e)?Ho(e):e,Ho=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`;function No(e,t){for(let n=0;n<e.length;n++)e[n]===null&&(e[n]=n?e[n-1]:t());return e}const Wo=e=>Array.isArray(e)?e:[e];function et(e){return se[e]&&(e=se[e]),ft(e)?Ve(e):e}const he={get:(e,t)=>{t=et(t);let n=Ye(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!n&&n!==0){const o=ie.get(t);o&&(n=o.initialValue)}return n},set:(e,t,n)=>{t=et(t),Ye(t)?e.style.setProperty(t,n):e.style[t]=n}};function qo(e,t=!0){if(!(!e||e.playState==="finished"))try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch{}}function Ko(e,t){var n;let o=(t==null?void 0:t.toDefaultUnit)||N;const a=e[e.length-1];if(_o(a)){const i=((n=a.match(/(-?[\d.]+)([a-z%]*)/))===null||n===void 0?void 0:n[2])||"";i&&(o=s=>s+i)}return o}function Go(){return window.__MOTION_DEV_TOOLS_RECORD}function Xo(e,t,n,o={},a){const i=Go(),s=o.record!==!1&&i;let l,{duration:d=P.duration,delay:c=P.delay,endDelay:m=P.endDelay,repeat:u=P.repeat,easing:h=P.easing,direction:g,offset:b,allowWebkitAcceleration:p=!1}=o;const v=mn(e),$=ft(t);let k=te.waapi();$&&Io(e,t);const S=et(t),z=Fo(v.values,S),T=ie.get(S);return qo(z.animation,!(Je(h)&&z.generator)&&o.record!==!1),()=>{const q=()=>{var y,ue;return(ue=(y=he.get(e,S))!==null&&y!==void 0?y:T==null?void 0:T.initialValue)!==null&&ue!==void 0?ue:0};let f=No(Wo(n),q);const F=Ko(f,T);if(Je(h)){const y=h.createAnimation(f,t!=="opacity",q,S,z);h=y.easing,f=y.keyframes||f,d=y.duration||d}if(Ye(S)&&(te.cssRegisterProperty()?Vo(S):k=!1),$&&!te.linearEasing()&&(be(h)||ne(h)&&h.some(be))&&(k=!1),k){T&&(f=f.map(K=>me(K)?T.toDefaultUnit(K):K)),f.length===1&&(!te.partialKeyframes()||s)&&f.unshift(q());const y={delay:Ne.ms(c),duration:Ne.ms(d),endDelay:Ne.ms(m),easing:ne(h)?void 0:At(h,d),direction:g,iterations:u+1,fill:"both"};l=e.animate({[S]:f,offset:b,easing:ne(h)?h.map(K=>At(K,d)):void 0},y),l.finished||(l.finished=new Promise((K,$n)=>{l.onfinish=K,l.oncancel=$n}));const ue=f[f.length-1];l.finished.then(()=>{he.set(e,S,ue),l.cancel()}).catch(hn),p||(l.playbackRate=1.000001)}else if(a&&$)f=f.map(y=>typeof y=="string"?parseFloat(y):y),f.length===1&&f.unshift(parseFloat(q())),l=new a(y=>{he.set(e,S,F?F(y):y)},f,Object.assign(Object.assign({},o),{duration:d,easing:h}));else{const y=f[f.length-1];he.set(e,S,T&&me(y)?T.toDefaultUnit(y):y)}return s&&i(e,t,f,{duration:d,delay:c,easing:h,repeat:u,offset:b},"motion-one"),z.setAnimation(l),l}}const Qo=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function Zo(e,t){var n;return typeof e=="string"?t?((n=t[e])!==null&&n!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}function wn(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n}const Jo={any:0,all:1};function Yo(e,t,{root:n,margin:o,amount:a="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const i=Zo(e),s=new WeakMap,l=c=>{c.forEach(m=>{const u=s.get(m.target);if(m.isIntersecting!==Boolean(u))if(m.isIntersecting){const h=t(m);be(h)?s.set(m.target,h):d.unobserve(m.target)}else u&&(u(m),s.delete(m.target))})},d=new IntersectionObserver(l,{root:n,rootMargin:o,threshold:typeof a=="number"?a:Jo[a]});return i.forEach(c=>d.observe(c)),()=>d.disconnect()}function ea(e,t){return typeof e!=typeof t?!0:Array.isArray(e)&&Array.isArray(t)?!ta(e,t):e!==t}function ta(e,t){const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function na(e){return typeof e=="object"}function Tt(e,t){if(na(e))return e;if(e&&t)return t[e]}let W;function ra(){if(!W)return;const e=W.sort(aa).map(sa);e.forEach(Ft),e.forEach(Ft),W=void 0}function Ge(e){W?cn(W,e):(W=[e],requestAnimationFrame(ra))}function oa(e){W&&vo(W,e)}const aa=(e,t)=>e.getDepth()-t.getDepth(),sa=e=>e.animateUpdates(),Ft=e=>e.next(),Pt=(e,t)=>new CustomEvent(e,{detail:{target:t}});function tt(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:n}}))}function jt(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:n}}))}const ia={isActive:e=>Boolean(e.inView),subscribe:(e,{enable:t,disable:n},{inViewOptions:o={}})=>{const{once:a}=o,i=wn(o,["once"]);return Yo(e,s=>{if(t(),jt(e,"viewenter",s),!a)return l=>{n(),jt(e,"viewleave",l)}},i)}},Lt=(e,t,n)=>o=>{o.pointerType&&o.pointerType!=="mouse"||(n(),tt(e,t,o))},la={isActive:e=>Boolean(e.hover),subscribe:(e,{enable:t,disable:n})=>{const o=Lt(e,"hoverstart",t),a=Lt(e,"hoverend",n);return e.addEventListener("pointerenter",o),e.addEventListener("pointerleave",a),()=>{e.removeEventListener("pointerenter",o),e.removeEventListener("pointerleave",a)}}},ca={isActive:e=>Boolean(e.press),subscribe:(e,{enable:t,disable:n})=>{const o=i=>{n(),tt(e,"pressend",i),window.removeEventListener("pointerup",o)},a=i=>{t(),tt(e,"pressstart",i),window.addEventListener("pointerup",o)};return e.addEventListener("pointerdown",a),()=>{e.removeEventListener("pointerdown",a),window.removeEventListener("pointerup",o)}}},$e={inView:ia,hover:la,press:ca},Rt=["initial","animate",...Object.keys($e),"exit"],nt=new WeakMap;function ua(e={},t){let n,o=t?t.getDepth()+1:0;const a={initial:!0,animate:!0},i={},s={};for(const p of Rt)s[p]=typeof e[p]=="string"?e[p]:t==null?void 0:t.getContext()[p];const l=e.initial===!1?"animate":"initial";let d=Tt(e[l]||s[l],e.variants)||{},c=wn(d,["transition"]);const m=Object.assign({},c);function*u(){var p,v;const $=c;c={};const k={};for(const f of Rt){if(!a[f])continue;const F=Tt(e[f]);if(!!F)for(const y in F)y!=="transition"&&(c[y]=F[y],k[y]=Qo((v=(p=F.transition)!==null&&p!==void 0?p:e.transition)!==null&&v!==void 0?v:{},y))}const S=new Set([...Object.keys(c),...Object.keys($)]),z=[];S.forEach(f=>{var F;c[f]===void 0&&(c[f]=m[f]),ea($[f],c[f])&&((F=m[f])!==null&&F!==void 0||(m[f]=he.get(n,f)),z.push(Xo(n,f,c[f],k[f],Ao)))}),yield;const T=z.map(f=>f()).filter(Boolean);if(!T.length)return;const q=c;n.dispatchEvent(Pt("motionstart",q)),Promise.all(T.map(f=>f.finished)).then(()=>{n.dispatchEvent(Pt("motioncomplete",q))}).catch(hn)}const h=(p,v)=>()=>{a[p]=v,Ge(b)},g=()=>{for(const p in $e){const v=$e[p].isActive(e),$=i[p];v&&!$?i[p]=$e[p].subscribe(n,{enable:h(p,!0),disable:h(p,!1)},e):!v&&$&&($(),delete i[p])}},b={update:p=>{!n||(e=p,g(),Ge(b))},setActive:(p,v)=>{!n||(a[p]=v,Ge(b))},animateUpdates:u,getDepth:()=>o,getTarget:()=>c,getOptions:()=>e,getContext:()=>s,mount:p=>(n=p,nt.set(n,b),g(),()=>{nt.delete(n),oa(b);for(const v in i)i[v]()}),isMounted:()=>Boolean(n)};return b}function da(e){const t={},n=[];for(let o in e){const a=e[o];ft(o)&&(se[o]&&(o=se[o]),n.push(o),o=Ve(o));let i=Array.isArray(a)?a[0]:a;const s=ie.get(o);s&&(i=me(a)?s.toDefaultUnit(a):a),t[o]=i}return n.length&&(t.transform=bn(n)),t}const ha={initial:()=>!0,addCleanup:A,addMount:Zt},rt=Qt(),vn=Qt(ha);function ga(e,t,n,o){const{addCleanup:a,addMount:i,initial:s}=n,l=ua(s()?t():{...t(),initial:!1},o);return i(Nn.bind(void 0,Wn(),()=>{a(l.mount(e())),Wt(()=>l.update(t()))})),l}const fa=/([^:; ]*):\s*([^;]*)/g;function Dt(e){const t={};let n;for(;n=fa.exec(e);)t[n[1]]=n[2];return t}function pa(e,t){if(typeof e=="object"&&typeof t=="object")return{...e,...t};if(typeof e=="string"&&typeof t=="string")return`${e};${t}`;const n=typeof e=="object"?e:Dt(e),o=typeof t=="object"?t:Dt(t);return{...n,...o}}const It=e=>{const[t,,n]=qn(e,["initial","animate","inView","inViewOptions","hover","press","variants","transition","exit"],["tag","ref","style","onMotionStart","onMotionComplete","onHoverStart","onHoverEnd","onPressStart","onPressEnd","onViewEnter","onViewLeave"]),o=ga(()=>i,()=>({...t}),bt(vn),bt(rt)),a=da(o.getTarget());let i;return r(rt.Provider,{value:o,get children(){return r(qt,Ie({ref:s=>{var l;i=s,(l=e.ref)==null||l.call(e,s)},get component(){return Jt(()=>e.tag||"div")},get style(){return Qe(()=>!!e.style,!0)()?pa(e.style,a):a},get["on:motionstart"](){return e.onMotionStart},get["on:motioncomplete"](){return e.onMotionComplete},get["on:hoverstart"](){return e.onHoverStart},get["on:hoverend"](){return e.onHoverEnd},get["on:pressstart"](){return e.onPressStart},get["on:pressend"](){return e.onPressEnd},get["on:viewenter"](){return e.onViewEnter},get["on:viewleave"](){return e.onViewLeave}},n))}})},yn=new Proxy(It,{get:(e,t)=>n=>(delete n.tag,r(It,Ie(n,{tag:t})))}),ma=e=>(e=Array.isArray(e)?e[0]:e,e instanceof Element?e:void 0),ba=(e,t)=>{const n={once:!0};e.addEventListener("motioncomplete",t,n),A(e.removeEventListener.bind(e,"motioncomplete",t,n))},wa=e=>{let{initial:t=!0}=e;Zt(()=>t=!0);let n=!1,o=[],a=[],i=[];return A(()=>{i.concat(a).forEach(s=>s()),a=i=o=[]}),r(vn.Provider,{value:{addCleanup:s=>a.push(s),addMount:s=>o.push(s),initial:()=>t},get children(){return r(rt.Provider,{value:void 0,get children(){return Jt(()=>{const s=Kn(()=>e.children),l=Y(()=>ma(s())),[d,c]=Ce(),[m,u]=Ce();return Gn(at(l,b=>{i.push(...a),a=[],Xn(()=>{e.exitBeforeEnter?(c(),g(()=>!n&&h(b))):(h(b),g())})})),[d,m];function h(b){c(b),o.forEach(p=>p()),o=[]}function g(b){var k;const p=()=>{u(),i.forEach(S=>S()),i=[],b==null||b()},v=u((k=d())!=null?k:m());if(!v)return p();const $=nt.get(v);if(!$||!$.getOptions().exit)return p();$.setActive("exit",n=!0),ba(v,()=>{n=!1,p()})}})}})}})},va=()=>{const e=Y(()=>[C.Folder,C.FetchingMore].includes(_.state)&&Qn()&&Zn());return r(wa,{exitBeforeEnter:!0,get children(){return r(E,{get when(){return e()},get children(){return r(Re,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return yn.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return r(H,{p:"$2",get bgColor(){return Le("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[r(je,{each:["rename","move","copy","delete"],children:t=>r(Oe,{name:t,onClick:()=>{w.emit("tool",t)}})}),r(fo,{}),r(mo,{}),r(Oe,{name:"cancel_select",onClick:()=>{Jn(!1)}})]}})}})}})}})},ya=()=>{const{isOpen:e,onToggle:t}=L({defaultIsOpen:localStorage.getItem("more-open")==="true",onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),n=Y(()=>e()?"$4":"$5"),o=Y(()=>_.state===C.Folder),{refresh:a}=U();return r(Re,{class:"left-toolbar-box",pos:"fixed",get right(){return n()},get bottom(){return n()},get children(){return r(E,{get when(){return e()},get fallback(){return r(R,{class:"toolbar-toggle",as:vt,onClick:()=>{t()}})},get children(){return r(ae,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return yn.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[r(ae,{spacing:"$1",class:"left-toolbar-in",get children(){return[r(E,{get when(){return Qe(()=>!!o(),!0)()&&(wt("write")||_.write)},get children(){return[r(R,{as:Ir,tips:"refresh",onClick:()=>{a(void 0,!0)}}),r(R,{get as(){return fe.new_file.icon},tips:"new_file",onClick:()=>{w.emit("tool","new_file")}}),r(R,{get as(){return fe.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{w.emit("tool","mkdir")}}),r(R,{as:Yn,tips:"upload",onClick:()=>{w.emit("tool","upload")}})]}}),r(E,{get when(){return Qe(()=>!!o(),!0)()&&wt("offline_download")},get children(){return r(R,{as:er,pl:"0",tips:"offline_download",onClick:()=>{w.emit("tool","offline_download")}})}}),r(R,{tips:"toggle_checkbox",as:co,onClick:tr}),r(R,{as:nr,tips:"local_settings",onClick:()=>{w.emit("tool","local_settings")}})]}}),r(R,{tips:"more",as:vt,onClick:t})]}})}})}})},$a=()=>{const{isOpen:e,onOpen:t,onClose:n}=L(),[o,a]=V(Sr),{pathname:i}=j(),{refresh:s}=U(),l=d=>{d==="copy"&&t()};return w.on("tool",l),A(()=>{w.off("tool",l)}),r(on,{get opened(){return e()},onClose:n,get loading(){return o()},onSubmit:async d=>{const c=await a(i(),d,re().map(m=>m.name));ee(c,()=>{s(),n()})}})},Ca=()=>{const{isOpen:e,onOpen:t,onClose:n}=L(),[o,a]=V(_r),{pathname:i}=j(),{refresh:s}=U(),l=d=>{d==="move"&&t()};return w.on("tool",l),A(()=>{w.off("tool",l)}),r(on,{get opened(){return e()},onClose:n,get loading(){return o()},onSubmit:async d=>{const c=await a(i(),d,re().map(m=>m.name));ee(c,()=>{s(),n()})}})},Sa=lt("<p></p>"),_a=()=>{const e=O(),{isOpen:t,onOpen:n,onClose:o}=L(),[a,i]=V(xr),{refresh:s}=U(),{pathname:l}=j(),d=c=>{c==="delete"&&n()};return w.on("tool",d),A(()=>{w.off("tool",d)}),r(Pe,{blockScrollOnMount:!1,get opened(){return t()},onClose:o,size:{"@initial":"xs","@md":"md"},get children(){return[r(Ee,{}),r(Ae,{get children(){return[r(Te,{get children(){return e("home.toolbar.delete")}}),r(Fe,{get children(){const c=Sa.cloneNode(!0);return Xt(c,()=>e("home.toolbar.delete-tips")),c}}),r(ot,{display:"flex",gap:"$2",get children(){return[r(oe,{onClick:o,colorScheme:"neutral",get children(){return e("global.cancel")}}),r(oe,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const c=await i(l(),re().map(m=>m.name));ee(c,()=>{s(),o()})},get children(){return e("global.confirm")}})]}})]}})]}})},xa=()=>{const{isOpen:e,onOpen:t,onClose:n}=L(),o=O(),[a,i]=V(Or),{pathname:s}=j(),{refresh:l}=U(),d=c=>{if(c==="rename"){if(!rr()){Z.warning(o("home.toolbar.only_one-tips"));return}t()}};return w.on("tool",d),A(()=>{w.off("tool",d)}),r(E,{get when(){return e()},get children(){return r(Be,{title:"home.toolbar.input_new_name",get opened(){return e()},onClose:n,get defaultValue(){var c,m;return(m=(c=re()[0])==null?void 0:c.name)!=null?m:""},get loading(){return a()},onSubmit:async c=>{const m=await i(Me(s(),re()[0].name),c);ee(m,()=>{l(),n()})}})}})},Oa=()=>{const{isOpen:e,onOpen:t,onClose:n}=L(),[o,a]=V(kr),{refresh:i}=U(),{pathname:s}=j(),l=d=>{d==="new_file"&&t()};return w.on("tool",l),A(()=>{w.off("tool",l)}),r(Be,{title:"home.toolbar.input_filename",get opened(){return e()},onClose:n,get loading(){return o()},onSubmit:async d=>{const c=await a(Me(s(),d),Xe());ee(c,()=>{i(),n()})}})},ka=()=>{const{isOpen:e,onOpen:t,onClose:n}=L(),[o,a]=V(Mr),{pathname:i}=j(),{refresh:s}=U(),l=d=>{d==="mkdir"&&t()};return w.on("tool",l),A(()=>{w.off("tool",l)}),r(Be,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:n,get loading(){return o()},onSubmit:async d=>{const c=await a(Me(i(),d));ee(c,()=>{s(),n()})}})},Ma=()=>{const e=O(),{isOpen:t,onOpen:n,onClose:o}=L(),[a,i]=V(Er),{pathname:s}=j(),l=d=>{d==="offline_download"&&n()};return w.on("tool",l),A(()=>{w.off("tool",l)}),r(Be,{title:"home.toolbar.offline_download",type:"text",get opened(){return t()},onClose:o,get loading(){return a()},get tips(){return e("home.toolbar.offline_download-tips")},onSubmit:async d=>{const c=await i(s(),d.split(`
`));ee(c,()=>{o()})}})},Ea=e=>{const t=O(),n=s=>{s===e.name&&a()};w.on("tool",n),A(()=>{w.off("tool",n)});const{isOpen:o,onOpen:a,onClose:i}=L();return r(Pe,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return o()},onClose:i,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[r(Ee,{}),r(Ae,{get children(){return[r(or,{}),r(Te,{get children(){return t(e.title)}}),r(Fe,{get children(){return r(E,{get when(){return o()},get children(){return r(st,{get fallback(){return r(Se,{})},get children(){return e.children}})}})}})]}})]}})},Aa=e=>{const t=O();return r(mr,{get children(){return[r(fr,{get children(){return t(`home.local_settings.${e.name}`)}}),r(zt,{get value(){return Ut[e.name]},onInput:n=>{pr(e.name,n.currentTarget.value)}})]}})},Ta=()=>{const{isOpen:e,onOpen:t,onClose:n}=L(),o=O(),a=i=>{i==="local_settings"&&t()};return w.on("tool",a),A(()=>{w.off("tool",a)}),r(gr,{get opened(){return e()},placement:"right",onClose:n,get children(){return[r(ar,{}),r(sr,{get children(){return[r(ir,{}),r(lr,{color:"$info9",get children(){return o("home.toolbar.local_settings")}}),r(cr,{get children(){return[r(ae,{spacing:"$2",get children(){return r(je,{get each(){return Object.keys(ur)},children:i=>r(Aa,{name:i})})}}),r(Kt,{mt:"$4",get children(){return r(H,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[r(dr,{}),r(hr,{})]}})}})]}})]}})]}})},Fa=we(()=>ve(()=>import("./Upload.726e683b.js"),["assets/Upload.726e683b.js","assets/index.81d7fc02.js","assets/index.659f4289.css","assets/index.fdfdfbe3.js"])),Pa=()=>[r($a,{}),r(Ca,{}),r(xa,{}),r(_a,{}),r(Oa,{}),r(ka,{}),r(Ma,{}),r(wo,{}),r(Ea,{name:"upload",title:"home.toolbar.upload",get children(){return r(Fa,{})}}),r(Ta,{})],ja=()=>r(br,{get children(){return[r(ya,{}),r(va,{}),r(Pa,{})]}}),La=()=>{vr(pe("site_title"));const e=pe("announcement");return e&&Z.render(()=>r(Yt,{children:e})),[r(lo,{}),r(ja,{}),r(Qr,{}),r(Jr,{})]},Wa=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"}));export{Wa as L,yn as M,U as a,Ur as b,Na as g,fe as o,Hr as u};
